<?xml version="1.0" encoding="UTF-8"?>

<FLOW VERSION="3.2" CLEANUP="true">
  <SEQUENCE TIMEOUT="" EXIT-ON="SUCCESS">

    <SEQUENCE NAME="try" TIMEOUT="" EXIT-ON="FAILURE">

      <!-- Invoke the built-in math adder -->
      <INVOKE TIMEOUT="" SERVICE="pub.math:addInts" VALIDATE-IN="$none" VALIDATE-OUT="$none">

        <!-- Pass num1/num2 straight through -->
        <MAP MODE="INPUT">
          <MAPTARGET>

<Values version="2.0">
  <record name="xml" javaclass="com.wm.util.Values">
    <value name="node_type">record</value>
    <value name="field_name">addIntsInput</value>
    <value name="field_type">record</value>
    <value name="field_dim">0</value>
    <array name="rec_fields" type="record" depth="1">
      <record javaclass="com.wm.util.Values">
        <value name="node_type">unknown</value>
        <value name="field_name">num1</value>
        <value name="field_type">string</value>
        <value name="field_dim">0</value>
      </record>
      <record javaclass="com.wm.util.Values">
        <value name="node_type">unknown</value>
        <value name="field_name">num2</value>
        <value name="field_type">string</value>
        <value name="field_dim">0</value>
      </record>
    </array>
  </record>
</Values>
          </MAPTARGET>
          <MAPSOURCE>

<Values version="2.0">
  <record name="xml" javaclass="com.wm.util.Values">
    <array name="rec_fields" type="record" depth="1">
    </array>
  </record>
</Values>
          </MAPSOURCE>
        </MAP>

        <!-- Accept the service output -->
        <MAP MODE="OUTPUT">
          <MAPTARGET>

<Values version="2.0">
  <record name="xml" javaclass="com.wm.util.Values">
    <value name="node_type">record</value>
    <value name="field_type">record</value>
    <value name="field_dim">0</value>
    <array name="rec_fields" type="record" depth="1">
      <record javaclass="com.wm.util.Values">
        <value name="node_type">unknown</value>
        <value name="field_name">value</value>
        <value name="field_type">string</value>
        <value name="field_dim">0</value>
      </record>
    </array>
  </record>
</Values>
          </MAPTARGET>
          <MAPSOURCE>

<Values version="2.0">
  <record name="xml" javaclass="com.wm.util.Values">
    <array name="rec_fields" type="record" depth="1">
    </array>
  </record>
</Values>
          </MAPSOURCE>
        </MAP>
      </INVOKE>

      <!-- Rename the sum to `result` for the caller -->
      <MAP TIMEOUT="" MODE="STANDALONE">
        <MAPTARGET>

<Values version="2.0">
  <record name="xml" javaclass="com.wm.util.Values">
    <value name="node_type">record</value>
    <value name="field_type">record</value>
    <value name="field_dim">0</value>
    <array name="rec_fields" type="record" depth="1">
      <record javaclass="com.wm.util.Values">
        <value name="node_type">unknown</value>
        <value name="field_name">result</value>
        <value name="field_type">string</value>
        <value name="field_dim">0</value>
      </record>
    </array>
  </record>
</Values>
        </MAPTARGET>
        <MAPSOURCE>

<Values version="2.0">
  <record name="xml" javaclass="com.wm.util.Values">
    <array name="rec_fields" type="record" depth="1">
      <record javaclass="com.wm.util.Values">
        <value name="node_type">unknown</value>
        <value name="field_name">value</value>
        <value name="field_type">string</value>
        <value name="field_dim">0</value>
      </record>
    </array>
  </record>
</Values>
        </MAPSOURCE>

        <MAPCOPY NAME="Link" FROM="/value;1;0" TO="/result;1;0">
        </MAPCOPY>

        <MAPDELETE NAME="Dropper" FIELD="/num1;1;0">
        </MAPDELETE>

        <MAPDELETE NAME="Dropper" FIELD="/num2;1;0">
        </MAPDELETE>

        <MAPDELETE NAME="Dropper" FIELD="/value;1;0">
        </MAPDELETE>
      </MAP>
    </SEQUENCE>

    <SEQUENCE NAME="catch" TIMEOUT="" EXIT-ON="FAILURE">

      <INVOKE TIMEOUT="" SERVICE="pub.flow:getLastError" VALIDATE-IN="$none" VALIDATE-OUT="$none">

        <MAP MODE="INPUT">
        </MAP>

        <MAP MODE="OUTPUT">
        </MAP>
      </INVOKE>
    </SEQUENCE>
  </SEQUENCE>
</FLOW>
